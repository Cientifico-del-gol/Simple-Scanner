import os

path='C:/'
pathfinder=os.fsencode(path)

print('Scanning computer...')

exelist=list()
for dirpath, dirnames, filenames in os.walk(path):
    for fname in filenames:
        if fname.endswith('.exe'):
            exelist.append(fname)

print('Computer scan finished!')

print('Comparing results to known malware database...')

threatlist=set()
with open('newlistmalware.txt', 'r', encoding='utf-8') as file:
    for line in file:
        for item in exelist:
            if item in line:
                threatlist.add(item)
                #count+=1

count=len(threatlist)
print('Possible threats found:',count)

print('Printing possible threats in a txt file!')

with open('Possiblethreats.txt', 'w', encoding='utf-8') as lst:
    lst.write(f'Total possible threats:{count}\n')
    for exe in threatlist:
        lst.write(exe+'\n')
    #lst.write('\n'.join(threatlist))

print('Possible threats txt printed!')
print('All done!')